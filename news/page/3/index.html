<!doctype html>
<html lang="en">

<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="alternate" type="application/atom+xml" href="/news/feed.xml" title="Ruma" />

<meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'none';
    style-src 'self' 'unsafe-inline';
    frame-src 'none'">

<title>News | Ruma</title>

<link rel="stylesheet" href="/normalize.css">
<link rel="stylesheet" href="/site.css">

<nav class="site-nav">
    <ul>
    
        <li><a href="&#x2F;">Home</a></li>
    
        <li><a href="&#x2F;news&#x2F;">News</a></li>
    
        <li><a href="&#x2F;projects&#x2F;">Projects using Ruma</a></li>
    
        <li><a href="https:&#x2F;&#x2F;liberapay.com&#x2F;ruma&#x2F;">Donate on Liberapay</a></li>
    
        <li><a href="&#x2F;docs&#x2F;">Documentation</a></li>
    
    </ul>
</nav>

<div class="page">
    

<main class="content">
    <h1 class="section-title">
        News
        <a href="/news/feed.xml"><svg viewBox="0 0 1536 1536" width="26" height="26" xmlns="http://www.w3.org/2000/svg">
    <title>News feed (Atom)</title>
    <path d="M384 1344c0 106-86 192-192 192S0 1450 0 1344s86-192 192-192 192 86 192 192zm512 123c1 18-5 35-17 48-12 14-29 21-47 21H697c-33 0-60-25-63-58-29-305-271-547-576-576-33-3-58-30-58-63V704c0-18 7-35 21-47 11-11 27-17 43-17h5c213 17 414 110 565 262 152 151 245 352 262 565zm512 2c1 17-5 34-18 47-12 13-28 20-46 20h-143c-34 0-62-26-64-60C1104 895 641 432 60 398c-34-2-60-30-60-63V192c0-18 7-34 20-46 12-12 28-18 44-18h3c350 18 679 165 927 414 249 248 396 577 414 927z"/>
</svg>
</a> 
    </h1>
    

    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/these-weeks-in-ruma-2019-12-14/" itemprop="headline">
            These Weeks in Ruma
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-12-14" itemprop="datePublished">2019-12-14</time>
        by
        <span class="author" itemprop="author">Jonas Platte</span>
    </small>
</header>

            <p>There's been steady progress since the last news entry, so I thought I'd write a small progress
update again.</p>
<p>These crates saw a new release:</p>
<ul>
<li>ruma-api-macros 0.9.0 (with an alpha beforehand)</li>
<li>ruma-api 0.12.0 (with an alpha beforehand)</li>
<li>ruma-client-api 0.5.0</li>
<li>ruma-client 0.3.0-beta.2</li>
<li>ruma-identifiers 0.14.1</li>
</ul>
<h2 id="what-changed">What changed?</h2>
<p>The biggest thing that changed is that the temporary non-support of server-side usage of ruma-api
that I wrote about last time has ended. Restoring server-side support also required some changes to
ruma-client-api, but those were rather minimal because all of the additional logic that deals with
the client / server side distinction is hidden away in ruma-api(-macros).</p>
<p>Moreover, ruma-client now has no more dependencies with alpha or beta versions, and will have its
0.3.0 release soon (pending a small update from hyper). ruma-identifiers now supports historical
user IDs, which are user IDs can't actually be created on a matrix homeserver because they contain
invalid characeters, but nevertheless have to be supported because older versions of the
specification allowed these characters and as such some users still have them in their IDs.</p>
<h2 id="server-side-support">Server-side support</h2>
<p>To support fallible deserialization on both ends of the protocol, the request-sending /
response-receiving side (when dealing with the client-server protocl, this is the client) and the
request-receiving / response-sending side (the server) now use different types if request or
response structs contain events. For every <code>Request</code> or <code>Response</code> that contains an event (or
another struct that contains another struct that contains a <code>Vec</code> of events and such) we now
generate a corresponding <code>IncomingRequest</code> / <code>IncomingResponse</code>. The non-<code>Incoming</code> structs don't
use ruma-events' <code>EventResult</code> type, while the <code>Incoming</code> types do.</p>
<p>For details about how these new structs are generated, see the <a href="https://docs.rs/ruma-api/0.12.0/ruma_api/derive.Outgoing.html">documentation for the new <code>Outgoing</code>
derive macro</a>.</p>

        </article>
    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/new-releases-2019-11-05/" itemprop="headline">
            New releases
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-11-05" itemprop="datePublished">2019-11-05</time>
        by
        <span class="author" itemprop="author">Jonas Platte</span>
    </small>
</header>

            <p>Last week, we uploaded 7 (!) new versions of our crates to crates.io:</p>
<ul>
<li>ruma-events-macros 0.2.0</li>
<li>ruma-events 0.15.0</li>
<li>ruma-events 0.15.1 (bugfix release because ruma-events 0.15.0 was released a tad too early)</li>
<li>ruma-api-macros 0.8.0</li>
<li>ruma-api 0.11.0</li>
<li>ruma-client-api 0.4.0</li>
<li>ruma-client 0.3.0-beta.1</li>
</ul>
<h2 id="what-changed">What changed?</h2>
<p>A quick overview:</p>
<ul>
<li>ruma-events 0.15 improves event deserialization and validation</li>
<li>the latest ruma-api &amp; ruma-client-api are only useable for implementing client-side stuff, server-side functionality will be added back in a later release</li>
<li>ruma-client 0.3.0-beta.1 supports async/await, the final version will be published after its dependencies are final too</li>
</ul>
<p>And now to the technical details...</p>
<h2 id="fallible-event-deserialization">Fallible event deserialization</h2>
<p>The most important change is one in ruma-events, and it is <em>the</em> reason all of the other crates saw a new release too. ruma-events 0.15.0 introduces a type <code>EventResult&lt;T&gt;</code>, which is almost the same as <code>Result&lt;T, ruma_events::InvalidEvent&gt;</code> (and it is in fact convertible to that) but with one important difference: It implements <code>serde::Deserialize</code> in a different way. Deserializing an <code>EventResult&lt;T&gt;</code> almost always succeeds. It tries to deserialize the <code>T</code>, and if that fails, falls back to <code>serde_json::Value</code> deserialization. However, in contrast to the fallback one would get with <code>Result&lt;T, serde_json::Value&gt;</code> deserialization which is supported by serde directly, we also capture the error message from <code>T</code>s deserialization... or validation:</p>
<h2 id="event-validation">Event validation</h2>
<p>I left out one detail in the previous section, and that is that the <code>T</code> in <code>EventResult&lt;T&gt;</code> doesn't actually need to implement <code>Deserialize</code>. Instead, it needs to implement <code>TryFromRaw</code>. This trait is very similar to <code>TryFrom</code> from the standard library, and in fact we would have used <code>TryFrom</code> directly, were it not for coherence issues¹. This trait is implemented for every event (content) type in ruma-events and allows conversion of a private raw version of that type, which does implement <code>Deserialize</code>, to the actual event (content) type. All of this is done to enable validation of events during deserialization, without having to write the actual deserialization code manually. There are currently few events that need this validation step after deserialization (most of the constraints the matrix spec puts on json fields beyond their types are captured in their Rust types, e.g. using <code>UserId</code> instead of <code>String</code>), but it is nevertheless useful to have the required mechanisms in place.</p>
<p>¹ <a href="https://github.com/rust-lang/rust/issues/55437">RFC 2451</a> &quot;Re-Rebalancing Coherence&quot; might allow us to switch to <code>TryFrom</code> in a future release, though I have not tested this yet</p>
<h2 id="temporary-non-support-of-server-side-usage">Temporary non-support of server-side usage</h2>
<p>Because of the whole fallible deserialization thing, we might not be able to use the same Rust types on both client &amp; server anymore. Due to that and the server not being worked on currently, we decided to temporarily remove request deserialization and response serialization from ruma-api and ruma-api-macros, leaving request serialization and response deserialization, as needed for the client use case. This affects ruma-client-api as well, through its use of the aforementioned crates.</p>
<h2 id="async-await-in-ruma-client">Async/await in ruma-client</h2>
<p>As listed at the beginning, we published ruma-client 0.3.0-beta.1. This release supports <code>async</code> / <code>await</code> syntax in addition to using all the latest lower-level ruma crates. While <code>async</code> / <code>await</code> will become stable with Rust 1.39.0 on 2019-11-09, tokio 0.2.0 is expected to take some more time to come out, which will in turn affect hyper 0.13.0's final release and thus our 0.3.0 release. Nevertheless, ruma-client 0.3.0-beta.1 can be used today on Rust beta or nightly.</p>

        </article>
    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/this-week-in-ruma-2019-08-11/" itemprop="headline">
            This Week in Ruma
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-08-11" itemprop="datePublished">2019-08-11</time>
        by
        <span class="author" itemprop="author">Jimmy Cuadra</span>
    </small>
</header>

            <h2 id="from-the-editor">From the editor</h2>
<p>I did another live stream of Ruma development on <a href="https://www.twitch.tv/jimmycuadra">my Twitch channel</a> this past week.
If you missed it, you can watch <a href="https://www.youtube.com/watch?v=vfMvGWCBkVI">the recording on YouTube</a>.
In the stream, I worked on another revision to the <a href="https://github.com/ruma/ruma-events">ruma-events</a> API in which a special result type was introduced to handle deserialization/validation errors.
<a href="https://github.com/jplatte">Jonas</a> quickly discovered, upon trying to update <a href="https://github.com/ruma/ruma-client-api">ruma-client-api</a> to ruma-events 0.10, that the new deserialization API didn't quite work and that further changes were needed.
I updated all the manually events to the <em>new</em> new API, but the events generated by <a href="https://github.com/ruma/ruma-events-macros">ruma-events-macros</a> still need to be updated.
I will do that on the next stream in the coming week.</p>
<p>A couple weeks ago I recorded an interview with the <a href="https://rustacean-station.org/">Rustacean Station</a> podcast, and today the episode was released.
You can find it here: <a href="https://rustacean-station.org/episode/001-ruma/">Ruma and the Matrix Communication Protocol: An Interview with Jimmy Cuadra</a>.
A huge thanks to Ben Striegel and Jon Gjengset for starting the podcast, and to Ben and Abdou Seck for taking the time to record this episode with me.
It was a good time, and I hope it gets some new people interested in Matrix and/or Ruma.</p>

        </article>
    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/this-week-in-ruma-2019-08-04/" itemprop="headline">
            This Week in Ruma
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-08-04" itemprop="datePublished">2019-08-04</time>
        by
        <span class="author" itemprop="author">Jimmy Cuadra</span>
    </small>
</header>

            <h2 id="from-the-editor">From the editor</h2>
<p>I forgot to provide an update last week, so this week we've got two weeks of stuff to cover.
The revamp of ruma-events I mentioned several times previously was released as <a href="https://github.com/ruma/ruma-events/releases/tag/0.13.0">0.13.0</a>, followed shortly by an update to <a href="https://github.com/ruma/ruma-events/releases/tag/0.14.0">0.14.0</a> to bump the url crate (which is a re-exported dependency) to version 2.0.
When trying to integrate the new ruma-events into ruma-client-api, <a href="https://github.com/jplatte">Jonas</a> quickly discovered that it wasn't actually possible, because API requests/responses that contain events need to be deserialized, and can't because the events don't have a public implementation of <code>serde::Deserialize</code> anymore.
I felt like an idiot for not foreseeing this seemingly obvious problem, but that's the way it goes sometimes.
I'll be working on addressing this next week.</p>
<p>A new version of ruma-api, <a href="https://github.com/ruma/ruma-events/releases/tag/ruma-api-0.10.0">0.10.0</a>, was released this week.
This release contains two significant changes:
The first is that the <code>Endpoint</code> trait has been revised to be implemented in terms of the endpoint's request type, rather than having the request be specified via an associated type.
This creates a more straightforward mapping between request and response types for each endpoint, removes a bunch of unnecessary unit structs that were only used to link associated request and response types together, and lets us remove some use of the turbofish operator in ruma-client.
The second change in this release is that ruma-api-macros has been merged into the repo, and now exists in a Cargo workspace.
The <code>ruma_api</code> procedural macro is now included and re-export from ruma-api itself under a default feature.
The macro has also been updated to refer to its dependencies via a hidden module in ruma-api.
The result is that downstream crates like ruma-client-api no longer have to specify dependnecies on all the crates referenced by the code generated by the macro.</p>
<p>Another exiciting update:
This past week, both Jonas and I started live streaming our development on Twitch.
I made a <a href="https://www.jimmycuadra.com/posts/twitch-live-streams-of-ruma-development/">separate post on my own blog</a> about this, but the short version is that I intend to live stream most of my work on Ruma from now on to help people learn about both Rust and Matrix.
You can find my live streams on <a href="https://www.twitch.tv/jimmycuadra">my Twitch channel</a>, and you can watch the recordings of past streams on <a href="https://www.youtube.com/channel/UCnflGGv5ZM2kdn9RPb2NG6Q">my YouTube channel</a>.
I'll announce my streams in <a href="https://matrix.to/#/#ruma:matrix.org">#ruma:matrix.org</a> as well as on <a href="https://twitter.com/jimmycuadra">my Twitter feed</a>.
Jonas's live streams can be watched on <a href="https://www.twitch.tv/jplatte">his Twitch channel</a>.</p>
<p>In the last update, I mentioned that Ruma finally <a href="https://liberapay.com/ruma/">accepts donations via Liberapay</a>.
Thank you very much to the people who have already signed on to donate to the project!
I thought it wouldn't hurt to mention again in case anyone missed it. :}</p>

        </article>
    
        <article itemscope itemtype="http://schema.org/BlogPosting">
            
<header class="post-header">
    <h1 class="post-title">
        <a href="https://www.ruma.io/news/this-week-in-ruma-2019-07-21/" itemprop="headline">
            This Week in Ruma
        </a>
    </h1>
    <small>
        › published on
        <time datetime="2019-07-21" itemprop="datePublished">2019-07-21</time>
        by
        <span class="author" itemprop="author">Jimmy Cuadra</span>
    </small>
</header>

            <h2 id="from-the-editor">From the editor</h2>
<p>This week I'd like to officially welcome <a href="https://github.com/jplatte">Jonas Platte</a> as a member of the Ruma team.
Jonas has been involved in the project for a long time and has provided many significant contributions, both via code and via discussions about the project's design.
Jonas is the original author of ruma-gtk, a graphical Matrix client built on ruma-client, which later became <a href="https://github.com/fest-im/fest">Fest</a>, which in turn was forked to create <a href="https://wiki.gnome.org/Apps/Fractal">Fractal</a>.
Thank you very much for all your work, Jonas!</p>
<p>A new addition to the website this week is the <a href="/contributing/">how to contribute</a> page, which offers an entry point for anyone interested in contributing to the project's software.
Thank you to everyone who has expressed interest in contributing in the past (and for everyone who will in the future!)
Hopefully this guide will help you get started and give you some ideas for how to help.</p>
<p>On several occasions I've been asked if there is a way to donate financially to the project.
I'm happy to report that Ruma now <a href="https://liberapay.com/ruma/">accepts donations via Liberapay</a>.
Donations to the project will be divided amongst team members, which as of today consists of only Jonas and me, but will hopefully grow over time.
In the past I was hesitant to accept donations because I didn't want financial interest to affect (or have the appearance of affecting) my decisions about the project.
I am building Ruma because I think the world needs Matrix, not as a way to support myself.
Being able to share donations to Ruma with other developers makes me much more comfortable with accepting donations.
It serves both to dilute my own financial interest in the project as well as to provide benefit in a way that's more in tune with the project's goals: making the world better for all of us.
For anyone that decides to support the project on Liberapay, I offer my most sincere thanks.</p>
<p>As for the software itself, the main update this week is that the revamp of ruma-events I've been working on for the past month is complete and has been merged into the master branch.
I still need to do one quick pass over everything to be sure I didn't make any obvious mistakes, but once that's done it will be ready for a new release.
As part of this revamp, a new supporting crate, <a href="https://github.com/ruma/ruma-events-macros">ruma-events-macros</a> also had its first release this week.
Like ruma-api-macros, it's really only used as an internal dependency for the project, and doesn't have much use to other developers directly.
But it could be interesting to look at if you want an example of a real-world procedural macro.</p>
<p>There was also a new release of ruma-api, <a href="https://github.com/ruma/ruma-api/releases/tag/0.9.0">version 0.9.0</a>, which revises the API to support the upcoming futures 0.3, ironically by removing the dependency on futures entirely.
This release also removes the library's dependency on hyper, as it's always been a goal for the foundational Ruma libraries to allow other developers to build Matrix software with other HTTP libraries if they wish.</p>
<h2 id="matrix-at-large">Matrix at large</h2>
<p><a href="https://riot.im/">Riot</a>, the flagship Matrix client, <a href="https://medium.com/@RiotChat/%EF%B8%8Fmessage-editing-%EF%B8%8F-reactions-5cffec8f71a2">released version 1.3</a> this week, which includes the ability to edit sent messages, and to add reactions to messages.
Both of these features are highly requested and bring Riot in line with other high-profile collaboration software.</p>
<p>Other notable news is the announcement to get <a href="https://github.com/matrix-org/dendrite">Dendrite</a>, a Matrix homeserver written in Go, into a state where it can have some practical use for Matrix users.
The first goal is for it to support enough functionality to be used for Matrix bots.
Read more about this announcement on <a href="https://matrix.org/blog/2019/07/19/this-week-in-matrix-2019-07-19">the lastest This Week in Matrix</a>.</p>

        </article>
    
</main>

<nav class="pagination">
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;www.ruma.io&#x2F;news&#x2F;page&#x2F;2&#x2F;"><span aria-hidden="true">&larr;</span> Newer entries</a>
        
    </div>
    <span class="page-number">3 / 11</span>
    <div class="next">
        
        <a href="https:&#x2F;&#x2F;www.ruma.io&#x2F;news&#x2F;page&#x2F;4&#x2F;">Older entries <span aria-hidden="true">&rarr;</span></a>
        
    </div>
</nav>



</div>

</html>
